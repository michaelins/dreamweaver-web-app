<ion-header>
  <ion-toolbar>
    <ion-title>购物车</ion-title>
    <ion-buttons slot="primary">
      <ion-button color="dark" (click)="editMode = !editMode">{{editMode?'完成':'编辑'}}</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>

  <!-- <ion-refresher pullFactor="0.5" closeDuration="200ms" snapbackDuration="50ms" pullMax="400"
    (ionRefresh)="doRefresh($event)">
    <ion-refresher-content refreshingSpinner="crescent"></ion-refresher-content>
  </ion-refresher> -->

  <ion-card>
    <ion-grid>
      <ion-row>
        <ion-col>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-list class="ion-padding" *ngIf="cart">
            <!-- <ion-item-sliding> -->
            <ion-item class="product" detail="false" *ngFor="let item of cart.items; index as i">
              <div slot="start" class="ion-margin-end product-image">
                <div class="custom-radios ion-margin-end">
                  <div>
                    <input type="checkbox" [id]="item.goodsId" name="color" [checked]="item.checked"
                      (change)="onSelectForPurchase(item,$event)" class="primary">
                    <label [for]="item.goodsId">
                      <span>
                        <div></div>
                        <img src="../../assets/icon/check-icn.svg" alt="Checked Icon" />
                      </span>
                    </label>
                  </div>
                </div>
                <img class="thumbnail" [src]="item.goodsImg+'?x-oss-process=image/resize,m_fill,h_108,w_108'">
              </div>
              <ion-grid>
                <ion-row>
                  <ion-col class="ion-padding-top ion-padding-bottom product-block">
                    <!-- <ion-label text-wrap> -->
                    <div class="box-2lines-ellipsis">
                      <div>
                        <article>{{item.goodsName}}</article>
                      </div>
                    </div>
                    <div class="ion-padding-top ion-padding-bottom">
                      <ion-text color="medium">
                        <p>{{item.goodsSpecificationDesc}}/{{item.goodsWarehouseDesc}}</p>
                      </ion-text>
                    </div>
                    <div class="product-price-amount-wrapper">
                      <div class="product-price">
                        <ion-text color="primary">
                          <p>{{item.goodsPrice | currency: 'CNY':'symbol-narrow'}}</p>
                        </ion-text>
                      </div>
                      <div class="product-amount">
                        <ion-icon name="remove" class="ion-padding-end" (click)="onReduceQuantity(item)"></ion-icon>
                        <ion-input text-center [value]="item.number"></ion-input>
                        <ion-icon name="add" class="ion-padding-start" (click)="onAddQuantity(item)"></ion-icon>
                      </div>
                    </div>
                    <!-- </ion-label> -->
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-item>
            <!-- <ion-item-options side="end">
                <ion-item-option color="danger">
                  <ion-icon slot="icon-only" name="trash"></ion-icon>
                </ion-item-option>
              </ion-item-options>
            </ion-item-sliding> -->
          </ion-list>
          <!-- <ion-list>
            <ion-item lines="full" class="product">
              <ion-grid class="ion-no-padding">
                <ion-row>
                  <ion-col size=4 class="ion-no-padding ion-padding-end ion-padding-top ion-padding-bottom">
                    <ion-img
                      src="https://r08872-dw-dev.oss-cn-zhangjiakou.aliyuncs.com/f64b19d3977b4c928cc379aa037ccb2d.jpg?x-oss-process=image/resize,m_fill,h_150,w_150">
                    </ion-img>
                  </ion-col>
                  <ion-col size=8 class="ion-no-padding ion-padding-top ion-padding-bottom">
                    <ion-label text-wrap>
                      <div class="box-2lines-ellipsis">
                        <div>
                          <article>WONJIN 原辰面膜透明质酸安瓶补水 保湿面膜10片装/盒</article>
                        </div>
                      </div>
                      <div class="ion-padding-top ion-padding-bottom">
                        <ion-badge color="secondary" class="ion-margin-end">丝绒水润白泥面膜</ion-badge>
                      </div>
                      <ion-text color="primary">
                        <h2>{{399 | currency: 'CNY':'symbol-narrow'}}</h2>
                      </ion-text>
                    </ion-label>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-item>
            <ion-item lines="full" class="product">
              <ion-grid class="ion-no-padding">
                <ion-row>
                  <ion-col size=4 class="ion-no-padding ion-padding-end ion-padding-top ion-padding-bottom">
                    <ion-img
                      src="https://r08872-dw-dev.oss-cn-zhangjiakou.aliyuncs.com/f64b19d3977b4c928cc379aa037ccb2d.jpg?x-oss-process=image/resize,m_fill,h_150,w_150">
                    </ion-img>
                  </ion-col>
                  <ion-col size=8 class="ion-no-padding ion-padding-top ion-padding-bottom">
                    <ion-label text-wrap>
                      <div class="box-2lines-ellipsis">
                        <div>
                          <article>WONJIN 原辰面膜透明质酸安瓶补水 保湿面膜10片装/盒</article>
                        </div>
                      </div>
                      <div class="ion-padding-top ion-padding-bottom">
                        <ion-badge color="secondary" class="ion-margin-end">丝绒水润白泥面膜</ion-badge>
                      </div>
                      <ion-text color="primary">
                        <h2>{{399 | currency: 'CNY':'symbol-narrow'}}</h2>
                      </ion-text>
                    </ion-label>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-item>
          </ion-list> -->
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
</ion-content>

<ion-footer *ngIf="editMode">
  <ion-toolbar>
    <ion-grid>
      <ion-row>
        <ion-col size=8>
          <ion-grid>
            <ion-row>
              <ion-col class="select" size=6>
                <div class="custom-radios">
                  <div>
                    <input type="checkbox" id="selectall" name="color" class="primary"
                      (change)="onSelectAllForEdit($event)">
                    <label for="selectall">
                      <span>
                        <div></div>
                        <img src="../../assets/icon/check-icn.svg" alt="Checked Icon" />
                      </span>
                    </label>
                  </div>
                </div>
                <ion-text color="dark" class="ion-margin-start">全选</ion-text>
              </ion-col>
              <ion-col class="total" size=6>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
        <ion-col class="purchase" size=4 (click)="onDeleteItems()">
          <ion-text color="light">删除</ion-text>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-footer>

<ion-footer *ngIf="!editMode">
  <ion-toolbar>
    <ion-grid>
      <ion-row>
        <ion-col size=8>
          <ion-grid>
            <ion-row>
              <ion-col class="select" size=6>
                <div class="custom-radios">
                  <div>
                    <input type="checkbox" id="selectall" name="color" class="primary"
                      (change)="onSelectAllForPurchase($event)">
                    <label for="selectall">
                      <span>
                        <div></div>
                        <img src="../../assets/icon/check-icn.svg" alt="Checked Icon" />
                      </span>
                    </label>
                  </div>
                </div>
                <ion-text color="dark" class="ion-margin-start">全选</ion-text>
              </ion-col>
              <ion-col class="total" size=6>
                <ion-text color="primary">合计：{{price | currency: 'CNY':'symbol-narrow'}}</ion-text>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-col>
        <ion-col class="purchase" size=4>
          <ion-text color="light">去结算 ({{quantity}})</ion-text>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-footer>