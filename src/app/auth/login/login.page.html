<ion-header no-border>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="onDismiss()">
        <ion-icon name="close" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content forceOverscroll="false">
  <div class="ion-padding"
    style="display: flex; align-items: center; justify-content: center; min-height: 100%; height: 100%; ">
    <form [formGroup]="form">

      <ion-grid class="ion-no-padding">
        <ion-row>
          <ion-col size="12" class="ion-no-padding">
            <ion-item lines="full">
              <ion-input class="ion-padding-vertical" placeholder="请输入手机号" type="tel" formControlName="accountNo">
              </ion-input>
            </ion-item>
          </ion-col>
          <!-- <ion-col size="12" class="ion-no-padding" *ngIf="!isSmsLogin">
            <ion-item lines="full">
              <ion-button slot="end" fill="outline" color="medium" style="--border-radius: 12px"
                [routerLink]="['/auth/password']">忘记密码</ion-button>
              <ion-input class="ion-padding-vertical" placeholder="请输入密码" type="password" formControlName="password">
              </ion-input>
            </ion-item>
          </ion-col> -->
          <ion-col size="12" class="ion-no-padding">
            <ion-item lines="full">
              <ion-button slot="end" fill="outline" color="medium" style="--border-radius: 12px"
                (click)="onGetAuthCode()" [disabled]="isSmsLogin && isGetAuthCodeDisabled">{{getAuthBtnText()}}
              </ion-button>
              <ion-input class="ion-padding-vertical" [placeholder]="isSmsLogin?'请输入验证码':'请输入密码'"
                [type]="isSmsLogin?'text':'password'" formControlName="code">
              </ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12" class="ion-padding-vertical">
            <ion-button expand="block" (click)="onLogin()" [disabled]="loginInProcess || (!form.valid && form.touched)">
              <ion-spinner name="crescent" class="ion-margin-end" *ngIf="loginInProcess"></ion-spinner>立即登录
            </ion-button>
          </ion-col>
          <ion-col size="6" class="ion-padding-start">
            <ion-text color="medium" (click)="onChangeLoginMethod()">{{isSmsLogin?'账号密码登录':'短信验证码登录'}}</ion-text>
          </ion-col>
          <ion-col size="6" class="ion-padding-end" text-right>
            <a [routerLink]="['/auth/register']">账号注册</a>
          </ion-col>
        </ion-row>
      </ion-grid>
    </form>
  </div>
</ion-content>

<ion-footer no-border>
  <ion-toolbar text-center>
    <ion-text color="medium"><small>登录即代表您已经同意</small></ion-text>
    <ion-text color="dark"><small>《**隐私政策》</small></ion-text>
  </ion-toolbar>
</ion-footer>